!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=22)}([function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(o&&e.length>0){var r;e[0]="(Bazaar) "+e[0],(r=console).log.apply(r,e)}}var o=-1!==window.location.href.indexOf("debug=true");t.exports.debug=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),u=void 0,c=void 0,l=-1!==window.location.href.indexOf("walldisplay=true"),p=new Promise(function(t,e){c=t,u=e}),f=function(){};f.prototype=HTMLElement.prototype;var d=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"getScriptBody",value:function(){var t=[].slice.call(this.getElementsByTagName("script")).filter(function(t){return"application/bazaarscript"===t.getAttribute("type")});return t&&t.length>0?t[0].textContent:void 0}},{key:"parseText",value:function(t){try{return JSON.parse(t)}catch(t){return s.debug("Could not parse Bazaar configuration as json. Evaluated as empty."),{}}}},{key:"buildConfig",value:function(t){var e={publication:void 0!==t.publication?t.publication:document.location.hostname,cxense:void 0!==t["cxense.use"]&&t["cxense.use"],buckyUrl:void 0!==t["bucky.url"]&&t["bucky.url"],slotUrl:void 0!==t["dfp.slotUrl"]?t["dfp.slotUrl"]:"/56257416/{publication}/{position}",keywords:void 0!==t.keywords?t.keywords:[],positions:void 0!==t.positions?t.positions:void 0!==t.preload?t.preload:[],localPercentage:void 0!==t.localPercentage?t.localPercentage:0,localLazyLoad:void 0!==t.localLazyLoad&&t.localLazyLoad,disableWallpaper:void 0!==t.disableWallpaper&&t.disableWallpaper,isMobile:void 0!==t.isMobile&&t.isMobile,isBatchedRequests:void 0===t["dfp.batchedRequests"]||"true"===t["dfp.batchedRequests"]},n=["toppbanner","skyskrapervenstre","skyskraper"];return!0!==e.disableWallpaper&&(e.positions=n.concat(e.positions.filter(function(t){return-1===n.indexOf(t)}))),l&&(e.publication="www.salsaposten.no",e.keywords.push("walldisplay")),/pushvarslings-app/i.test(navigator.userAgent)&&e.keywords.push("pushapp"),Math.min(document.documentElement.clientWidth,window.innerWidth||0)<1375&&(e.positions.splice(e.positions.indexOf("skyskraper"),1),e.positions.splice(e.positions.indexOf("skyskrapervenstre"),1)),e}},{key:"attachedCallback",value:function(){var t=this.getScriptBody(),e=this.parseText(t),n=this.buildConfig(e);s.debug("Config ready: ",n),c(n)}}]),e}(f);document.registerElement("bazaar-config",{prototype:d.prototype}),t.exports=p},function(t,e,n){"use strict";function r(t){return[].slice.call(t.getElementsByTagName("script")).filter(function(t){return"application/bazaarscript"===t.getAttribute("type")})}function o(t){return t.map(function(t){var e=t.cloneNode(!0);return e.setAttribute("type","text/javascript"),e.async=!1,e})}function i(t,e){e.forEach(function(e){t.removeChild(e)})}function a(t,e){return new Promise(function(n){c(t,e.outerHTML,{done:function(){n()},error:function(){console.error("Error with",e),n()}})})}function s(t,e){return e.reduce(function(e,n){return e.then(a.bind(null,t,n))},Promise.resolve())}function u(t){return new Promise(function(e){var n=r(t),a=o(n);s(t,a).then(function(){i(t,n),e()})})}var c=n(34);t.exports.transformSync=u},function(t,e,n){"use strict";function r(t){var e=[768,0],n=[0,0];switch(t){case"toppbanner":case"toppbannerdods":return{minHeight:{mobile:250,desktop:120},size:[300,250],breakpoints:[{break:[[768,0],[[980,120],[980,150],[980,200],[980,240],[980,300]]]},{break:[n,[[300,250],[320,250],[300,300]]]}]};case"skyskraperdods":return{minHeight:{mobile:500,desktop:500},size:[181,500],breakpoints:[{break:[[1300,250],[[180,500],[250,500],[300,600]]]},{break:[n,[]]}]};case"skyskrapervenstre":return{minHeight:{mobile:500,desktop:500},size:[181,500],breakpoints:[{break:[[1300,250],[[181,500],[181,700]]]},{break:[n,[]]}]};case"midtbanner":return{minHeight:{mobile:250,desktop:120},size:[980,150],breakpoints:[{break:[e,[[980,120],[980,150],[980,200],[980,240],[980,300],[980,500],[980,600]]]},{break:[n,[[300,250],[320,250],[300,300],[320,480]]]}]};case"challengedeck":return{minHeight:{mobile:250,desktop:120},size:[980,120],desktop:[e,[[980,120],[980,150]]],mobile:[n,[[300,250]]]};case"netboard":return{minHeight:{mobile:400,desktop:500},size:[580,500],breakpoints:[{break:[e,[[468,400],[480,400],[580,400],[580,500]]]},{break:[n,[[300,250],[320,250],[300,300],[320,480]]]}]};case"netboarddm":case"netboardsmb":return{minHeight:{mobile:400,desktop:500},size:[580,500],breakpoints:[{break:[e,[[480,400],[580,400],[580,500]]]},{break:[n,[]]}]};case"skyskraper":return{minHeight:{mobile:500,desktop:500},size:[180,500],breakpoints:[{break:[[1300,250],[[180,500],[160,600],[180,700]]]},{break:[[1450,250],[[180,500],[160,600],[180,700],[250,500],[280,500],[300,600]]]},{break:[n,[]]}]};case"lokalbanner1":case"lokalbanner2":return{minHeight:{mobile:150,desktop:150},size:[480,150],breakpoints:[{break:[e,[[480,150]]]},{break:[n,[]]}]};case"artikkelboard":return{minHeight:{mobile:250,desktop:250},size:[300,250],breakpoints:[{break:[e,[[320,250],[300,250]]]},{break:[n,[]]}]};case"vertikalnative":return{minHeight:{mobile:320,desktop:480},size:[320,480],breakpoints:[{break:[e,[[320,480]]]},{break:[n,[]]}]};case"outstreamvideo":return{minHeight:{mobile:1,desktop:1},size:[1,1],breakpoints:[{break:[e,[[1,1]]]},{break:[n,[[1,1]]]}]};default:return!1}}t.exports.mapping=r},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(0),o=n(1);t.exports=function(){return new Promise(function(t){o.then(function(e){var n=Math.floor(100*Math.random()),o=n>=e.localPercentage;r.debug("Ad split (random [0-99]): "+n+" resulted in activating "+(o?"DFP":"local ads")),t(o)})})}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(23),u=n(24);n(17),n(12),n(13),n(11);var c=n(3),l=n(0),p=n(19).monitor,f=function(){};f.prototype=HTMLElement.prototype;var d=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"render",value:function(){var t=this;this.ad.then(function(e){e&&(p(t),l.debug("ElementId: "+e.id+" is in viewport, attached elementId to element in DOM"),l.debug("ElementId "+e.id+" is in viewport, is refreshed "+e.refreshed),t.setAttribute("id",e.id),t.hasAttribute("labeled")&&"true"===t.getAttribute("labeled")&&t.classList.add("am-bazaar-ad--labeled"),e.display(e.refreshed))})}},{key:"createdCallback",value:function(){for(;this.hasChildNodes();)this.removeChild(this.firstChild)}},{key:"attachedCallback",value:function(){var t=this.getAttribute("position");this.hasAttribute("disabled")||(this.ad=u.getAd(t),"toppbanner"===t&&this.setMinHeight(t),document.dispatchEvent(new CustomEvent("amedia:registerLazyLoad",{detail:this})))}},{key:"attributeChangedCallback",value:function(t,e,n){"disabled"!==t||this.hasAttribute("disabled")||this.attachedCallback()}},{key:"setMinHeight",value:function(t){if(c.mapping(t)){var e=window.screen.width>1200?c.mapping(t).minHeight.desktop:c.mapping(t).minHeight.mobile;this.setAttribute("style","min-height: "+e+"px")}}},{key:"sticky",value:function(){s.stickToTop(this)}}],[{key:"observedAttributes",get:function(){return["disabled"]}}]),e}(f);document.registerElement("bazaar-ad",{prototype:d.prototype})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=(n(0),n(1)),u=n(10),c=n(2),l=function(){};l.prototype=HTMLElement.prototype;var p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"render",value:function(){var t=this;u.then(function(){c.transformSync(t)})}},{key:"attachedCallback",value:function(){var t=this;s.then(function(e){e.localLazyLoad?document.dispatchEvent(new CustomEvent("amedia:registerLazyLoad",{detail:t})):t.render()})}}]),e}(l);document.registerElement("bazaar-ad",{prototype:p.prototype})},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(27).polyfill(),n(26),n(28),function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}if("function"==typeof window.CustomEvent)return!1;t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(){var t=[],e=new IntersectionObserver(function(n){n.forEach(function(n){var r=t.indexOf(n.target);-1!==r&&(window.requestAnimationFrame(n.target.render.bind(n.target)),e.unobserve(n.target),t.splice(r,1))})},{rootMargin:"200px"});document.addEventListener("amedia:registerLazyLoad",function(n){var r=n.detail;if(!r)throw new Error("Missing element for amedia:registerLazyLoad");-1===t.indexOf(r)&&(t.push(r),e.observe(r))})}(),"function"!=typeof Object.assign&&(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=(n(0),n(2)),u=void 0,c=void 0,l=new Promise(function(t,e){c=t,u=e}),p=function(){};p.prototype=HTMLElement.prototype;var f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"attachedCallback",value:function(){s.transformSync(this).then(function(){c()})}}]),e}(p);document.registerElement("bazaar-local",{prototype:f.prototype}),t.exports=l},function(t,e,n){"use strict";var r=n(0);window.addEventListener("message",function(t){if(void 0!==t.data.type&&"bazaar:dm_fallback"===t.data.type){r.debug("DM_fallback registered: ",JSON.stringify(t.data));var e=t.data,n=(e.adUnit,e.elementId,document.querySelector('bazaar-ad[position="netboarddm"]'));if(!n)return;var o=document.createElement("bazaar-ad");o.setAttribute("position","netboard"),o.setAttribute("labeled",!0),o.classList.add("am-bazaar-ad"),n.parentNode.replaceChild(o,n)}})},function(t,e,n){"use strict";var r=n(0);window.addEventListener("message",function(t){if(void 0!==t.data.type&&"bazaar:mobile_fullwidth"===t.data.type){r.debug("Mobile_fullwidth ready: ",JSON.stringify(t.data));var e=t.data,n=(e.adUnit,e.elementId),o=document.querySelector("bazaar-ad[id="+n+"]");if(!o)return;Object.assign(o.style,{width:"100%"});var i=o.firstChild;if(!i)return;Object.assign(i.style,{width:"100%"});var a=o.querySelector("iframe");if(!a)return;Object.assign(a.style,{width:"100%"})}})},function(t,e,n){"use strict";var r=n(0);window.addEventListener("message",function(t){if(void 0!==t.data.type&&"bazaar:outstream_adunits"===t.data.type){var e=function(t){window.dispatchEvent(new CustomEvent("seshat-set",{detail:t}))},n=function(){s&&(s.style.display="none"),a&&(a.style.display="none"),i&&(i.style.display="none")};r.debug("Outstream dfp template sent postmessage to bazaar with data: ",t.data);var o=t.data.typeOfOutstreamEvent,i=document.getElementById("smartclipContainer"),a=document.getElementById("smartclipClose"),s=document.getElementById("smartclipHeader"),u=document.querySelector("bazaar-ad[position='outstreamvideo']");if(!u)return void r.debug("Outstream no bazaar-ad[position='outstreamvideo'] element found in DOM");a&&a.addEventListener("click",function(){n()});var c=u.className;u.className="";var l=!0;"sc_smartIntxtStart"===o&&(r.debug("Outstream ad started"),function(){s&&(s.style.display="inline-block"),a&&(a.style.display="inline-block")}(),u.className+=" "+c,e({"outstream-adshown":!0})),"sc_smartIntxtNoad"===o&&(r.debug("Outstream ad not found"),n(),l=!1,e({"outstream-adshown":!1})),"sc_smartIntxtEnd"===o&&l&&(r.debug("Outstream ad ended"),n(),e({"outstream-adcompleted":!0}))}})},function(t,e,n){"use strict";var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.position,r=void 0===n?"absolute":n,o=e.left,i=void 0===o?0:o,a=e.top,s=void 0===a?0:a,u=e.transform,c=void 0===u?"":u,l=e.width,p=void 0===l?"auto":l;Object.assign(t.style,{position:r,top:s+"px",left:i+"px",width:""+p,transform:c})},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.width,r=void 0===n?"100%":n,o=e.top,i=void 0===o?"0px":o,a=e.maxWidth,s=void 0===a?"100%":a,u=e.height,c=void 0===u?"100%":u;Object.assign(t.style,{width:""+r,maxWidth:""+s,height:""+c,margin:"0px auto",backgroundColor:"transparent",position:"absolute",top:""+i,left:"0px",right:"0px",bottom:"0px",zIndex:2})};t.exports.setPositionElement=r,t.exports.setContainerPosition=o},function(t,e,n){"use strict";function r(t){Object.assign(t.style,{top:"0",position:"fixed"})}function o(t,e){Object.assign(t.style,{position:"absolute",top:e+"px"})}t.exports.stickToTop=function(t,e,n){var i=function(i){i.forEach(function(i){i.target===e&&(i.boundingClientRect.top>=-e.getBoundingClientRect().height?o(t,n):r(t))})};new IntersectionObserver(i).observe(e)}},function(t,e,n){"use strict";var r=n(15),o=n(14),i=function(t){return t.getBoundingClientRect().top+window.pageYOffset},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=void 0===e?"980":e,r=t.height,i=void 0===r?"0":r,a=t.top,s=void 0===a?"0":a,u=document.createElement("div");return u.classList?u.classList.add("bazaar-wallpaper"):u.className="bazaar-wallpaper",o.setContainerPosition(u,{maxWidth:n+"px",height:i+"px",top:s+"px"}),u},s=function(t,e,n){var s=t.clickUrl,u=t.bkImg,c=t.bkImgWidth,l=t.bkImgHeight,p=(t.top,t.width),f=a({width:p,top:i(e)}),d=document.createElement("bazaar-ad"),h=document.createElement("bazaar-ad");d.setAttribute("position","skyskrapervenstre"),h.setAttribute("position","skyskraper");var m=document.createElement("a"),g=document.createElement("a");m.setAttribute("href",""+s),g.setAttribute("href",""+s),Object.assign(m.style,{display:"block",width:(c-p)/2+"px",height:l+"px",background:"url("+u+") 0px 0px no-repeat",overflow:"hidden",position:"absolute",top:"0px",left:"-"+(c-p)/2+"px"}),Object.assign(g.style,{display:"block",width:(c-p)/2+"px",height:l+"px",background:"url("+u+") 100% 0px no-repeat",overflow:"hidden",position:"absolute",top:"0px",left:p+"px"}),o.setPositionElement(d,{width:p,transform:"translateX(-100%)",left:"-"+n}),o.setPositionElement(h,{width:"100",left:p+n}),f.appendChild(m),f.appendChild(d),f.appendChild(g),f.appendChild(h),document.body.insertBefore(f,document.body.firstChild),r.stickToTop(f,e,i(e))},u=function(t,e,n){var s=(t.top,t.width),u=a({width:s,top:i(e)}),c=document.createElement("bazaar-ad");c.setAttribute("position","skyskrapervenstre");var l=document.createElement("bazaar-ad");l.setAttribute("position","skyskraper"),o.setPositionElement(c,{width:"180px",transform:"translateX(-100%)",left:"-"+n}),o.setPositionElement(l,{left:s+n}),u.appendChild(c),u.appendChild(l),document.body.insertBefore(u,document.body.firstChild),r.stickToTop(u,e,i(e))};t.exports.adunitsTemplate=u,t.exports.adunitsTemplateBkgImg=s},function(t,e,n){"use strict";var r=n(16),o=n(0);window.addEventListener("message",function(t){if(void 0!==t.data.type&&"bazaar:wallpaper_adunits"===t.data.type){o.debug("Wallpaper ready: ",JSON.stringify(t.data));var e=document.querySelector('bazaar-ad[position="toppbanner"]'),n=t.data,i=n.template,a=n.width,s=n.bkImg,u=n.bkImgWidth,c=a-980,l=0===c?20:c,p=0===c?l/2:0,f=(u-a)/2;Object.assign(e.style,{width:a+"px",zIndex:"10",marginLeft:"-"+(0===c?l:c/2)+"px",background:"url("+s+") -"+f+"px 0px no-repeat"});var d=e.querySelector("iframe");if(!d)return;Object.assign(d.style,{width:a+"px",marginLeft:"-"+(0===c?l:c/2)+"px"});"10"===i.substring(0,2)?r.adunitsTemplate(t.data,d,p):r.adunitsTemplateBkgImg(t.data,d,p)}})},function(t,e,n){"use strict";function r(t,e){return f=t,new Promise(function(t,n){try{window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){e().then(function(e){if(u.debug("Completed initial slot creation of ads",e.map(function(t){return t.id})),window.googletag.pubads().addEventListener("impressionViewable",function(t){u.debug("impressionViewable "+o(t.slot)+" @"+c.elapsed()+"ms"),"skyskraper"===o(t.slot)&&s.log("inscreen.skyskraper.count")}),window.googletag.pubads().addEventListener("slotOnload",function(t){u.debug("Impression download "+o(t.slot)+" @"+c.elapsed()+"ms"),"toppbanner"===o(t.slot)&&i("slotOnload",t)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(t){if(u.debug("Rendered "+o(t.slot)+" "+t.size+" (campaignId:"+t.campaignId+", creativeId:"+t.creativeId+", lineItemId:"+t.lineItemId+", isEmpty:"+t.isEmpty+") size: "+t.size+"@"+c.elapsed()+"ms"),"toppbanner"===o(t.slot)&&i("slotRenderEnded",t),"skyskrapervenstre"===o(t.slot)&&t.isEmpty){var e=document.querySelector('bazaar-ad[position="skyskraper"]');e.removeAttribute("disabled"),e.sticky()}if("skyskraper"===o(t.slot)&&!t.isEmpty){window.googletag.pubads().setTargeting("viewportWidthDesktop",window.innerWidth>1375?"true":"false"),f.isMobile?s.log("inscreen.skyskraper.mobile"):s.log("inscreen.skyskraper.desktop"),s.log("inscreen.skyskraper.load")}}),window.googletag.pubads().setTargeting("publication",f.publication),window.googletag.pubads().setTargeting("keyword",f.keywords),window.googletag.pubads().setTargeting("fritekst",f.keywords),p&&window.googletag.pubads().setTargeting("pageview_id",p),window.googletag.pubads().enableSingleRequest(),f.isBatchedRequests){u.debug("Batch requets enabled"),window.googletag.pubads().disableInitialLoad(),window.googletag.pubads().setCentering(!0),window.googletag.enableServices();var n=e.filter(function(t){return"toppbanner-1"===t.id||"skyskraper-1"===t.id||"skyskrapervenstre-1"===t.id}).map(function(t){return t.refreshed=!0,t.slot});window.googletag.pubads().refresh(n)}else window.googletag.pubads().setCentering(!0),window.googletag.enableServices();t()})})}catch(t){console.error(t),n(t)}})}function o(t){return t.getAdUnitPath().split("/")[3]}function i(t,e){s.timing(t+"."+o(e.slot),(new Date).getTime()-s.fetchStart())}function a(t){var e=t.position,n=t.id,r=t.index;try{var o=l.mapping(e);if(console.log("Error getting size-mapping slot for "+e),!o)return console.error("Error getting renate size-mapping slot for "+e),!1;var i=void 0,a=f.slotUrl.replace("{publication}",f.publication).replace("{position}",e);if(i=window.googletag.defineSlot(a,o.size,n),u.debug("Load slot",i),!i)return console.error("Error getting slot for "+e+", id "+n+", size "+o.size+", url "+a),!1;var s=window.googletag.sizeMapping();if(void 0!==o.breakpoints){for(var c in o.breakpoints){var p=o.breakpoints[c];s.addSize(p.break[0],p.break[1])}i.defineSizeMapping(s.build())}return i.addService(window.googletag.pubads()).setTargeting("position",r).setTargeting("format",e).setCollapseEmptyDiv(!0),u.debug("Created slot with elementId: "+n),{id:n,slot:i,display:function(t){f.isBatchedRequests&&!0!==t?(u.debug("Calling refresh on "+n+"and refreshed: ",t),window.googletag.cmd.push(function(){window.googletag.display(n),window.googletag.pubads().refresh([i],{changeCorrelator:!1})}),t=!0):(u.debug("Calling display else for "+n+" refresh: "+t),window.googletag.cmd.push(function(){window.googletag.display(n)}))}}}catch(t){return console.error("Error loading position "+e+", id "+n,t),!1}}var s=n(20),u=n(0),c=n(25),l=n(3),p=n(21),f=void 0;!function(){var t=document.createElement("script");t.async=!0,t.type="text/javascript";var e="https:"==document.location.protocol;t.src=(e?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}(),t.exports.init=r,t.exports.load=a},function(t,e,n){"use strict";t.exports.monitor=function(){}},function(t,e,n){"use strict";t.exports.timing=function(){},t.exports.fetchStart=function(){},t.exports.log=function(){}},function(t,e,n){"use strict";t.exports=void 0},function(t,e,n){"use strict";n(9),n(8),n(5).then(function(t){n(t?6:7)})},function(t,e,n){"use strict";function r(t){Object.assign(t.style,{top:"0",position:"fixed"})}function o(t){Object.assign(t.style,{position:"relative"}),delete t.style.top}function i(){var t=document.createElement("div");return t.setAttribute("data-am-placeholder","sticky-placeholder"),t}t.exports.stickToTop=function(t){var e=i();t.parentNode.insertBefore(e,t);var n=function(e){e.forEach(function(e){e.target.nextSibling===t&&(e.boundingClientRect.top>=0?o(t):r(t))})};new IntersectionObserver(n).observe(e)}},function(t,e,n){"use strict";function r(t){return Promise.all(t.map(function(t){return f.positions[t]=f.positions[t]||{},f.positions[t].prepared=f.positions[t].prepared||[],o(t).then(function(e){return f.positions[t].prepared.push(e),e})}))}function o(t){return i(t).then(c.load)}function i(t){return new Promise(function(e){p.lock(function(){f.positions[t]=f.positions[t]||{};var n=f.positions[t].nextIndex||1;f.positions[t].nextIndex=n+1,p.unlock(),e({position:t,id:t+"-"+n,index:n})})})}function a(t){return f.positions[t]&&f.positions[t].prepared?f.positions[t].prepared.shift():void 0}function s(t){return m.then(function(){return a(t)}).then(function(e){return e||o(t)})}var u=n(1),c=n(18),l=n(29),p=(n(0),l.createMutex()),f={},d=void 0,h=void 0,m=new Promise(function(t,e){h=t,d=e});u.then(function(t){f.config=t,f.positions={},c.init(t,function(){return r(f.config.positions)}).then(function(){h(f)})}),t.exports.getAd=s},function(t,e,n){"use strict";function r(){return o?Date.now()-i:void 0}var o="undefined"!=typeof window&&window.performance&&void 0!==window.performance.timing.fetchStart,i=o?window.performance.timing.fetchStart:void 0;t.exports.elapsed=r},function(t,e,n){(function(e){/*!

Copyright (C) 2014-2016 by Andrea Giammarchi - @WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
function n(t,e){"use strict";function n(){var t=x.splice(0,x.length);for(Zt=0;t.length;)t.shift().call(null,t.shift())}function r(t,e){for(var n=0,r=t.length;n<r;n++)m(t[n],e)}function o(t){for(var e,n=0,r=t.length;n<r;n++)e=t[n],I(e,rt[a(e)])}function i(t){return function(e){Nt(e)&&(m(e,t),ot.length&&r(e.querySelectorAll(ot),t))}}function a(t){var e=Dt.call(t,"is"),n=t.nodeName.toUpperCase(),r=at.call(nt,e?J+e.toUpperCase():X+n);return e&&-1<r&&!s(n,e)?-1:r}function s(t,e){return-1<ot.indexOf(t+'[is="'+e+'"]')}function u(t){var e=t.currentTarget,n=t.attrChange,r=t.attrName,o=t.target,i=t[$]||2,a=t[Z]||3;!te||o&&o!==e||!e[W]||"style"===r||t.prevValue===t.newValue&&(""!==t.newValue||n!==i&&n!==a)||e[W](r,n===i?null:t.prevValue,n===a?null:t.newValue)}function c(t){var e=i(t);return function(t){x.push(e,t.target),Zt&&clearTimeout(Zt),Zt=setTimeout(n,1)}}function l(t){Jt&&(Jt=!1,t.currentTarget.removeEventListener(Y,l)),ot.length&&r((t.target||_).querySelectorAll(ot),t.detail===F?F:j),It&&d()}function p(t,e){var n=this;qt.call(n,t,e),M.call(n,{target:n})}function f(t,e){At(t,e),A?A.observe(t,Qt):(Xt&&(t.setAttribute=p,t[N]=C(t),t[P](G,M)),t[P](K,u)),t[V]&&te&&(t.created=!0,t[V](),t.created=!1)}function d(){for(var t,e=0,n=Pt.length;e<n;e++)t=Pt[e],it.contains(t)||(n--,Pt.splice(e--,1),m(t,F))}function h(t){throw new Error("A "+t+" type is already registered")}function m(t,e){var n,r=a(t);-1<r&&(H(t,rt[r]),r=0,e!==j||t[j]?e!==F||t[F]||(t[j]=!1,t[F]=!0,r=1):(t[F]=!1,t[j]=!0,r=1,It&&at.call(Pt,t)<0&&Pt.push(t)),r&&(n=t[e+z])&&n.call(t))}function g(){}function v(t,e,n){var r=n&&n[D]||"",o=e.prototype,i=Ct(o),a=e.observedAttributes||pt,s={prototype:i};Rt(i,V,{value:function(){if(Et)Et=!1;else if(!this[yt]){this[yt]=!0,new e(this),o[V]&&o[V].call(this);var t=Lt[Mt.get(e)];(!wt||t.create.length>1)&&w(this)}}}),Rt(i,W,{value:function(t){-1<at.call(a,t)&&o[W].apply(this,arguments)}}),o[q]&&Rt(i,B,{value:o[q]}),o[U]&&Rt(i,Q,{value:o[U]}),r&&(s[D]=r),t=t.toUpperCase(),Lt[t]={constructor:e,create:r?[r,Ot(t)]:[t]},Mt.set(e,t),_[R](t.toLowerCase(),s),T(t),xt[t].r()}function y(t){var e=Lt[t.toUpperCase()];return e&&e.constructor}function b(t){return"string"==typeof t?t:t&&t.is||""}function w(t){for(var e,n=t[W],r=n?t.attributes:pt,o=r.length;o--;)e=r[o],n.call(t,e.name||e.nodeName,null,e.value||e.nodeValue)}function T(t){return t=t.toUpperCase(),t in xt||(xt[t]={},xt[t].p=new _t(function(e){xt[t].r=e})),xt[t].p}function k(){bt&&delete t.customElements,lt(t,"customElements",{configurable:!0,value:new g}),lt(t,"CustomElementRegistry",{configurable:!0,value:g});for(var e=L.get(/^HTML[A-Z]*[a-z]/),n=e.length;n--;function(e){var n=t[e];if(n){t[e]=function(t){var e,r;return t||(t=this),t[yt]||(Et=!0,e=Lt[Mt.get(t.constructor)],r=wt&&1===e.create.length,t=r?Reflect.construct(n,pt,e.constructor):_.createElement.apply(_,e.create),t[yt]=!0,Et=!1,r||w(t)),t},t[e].prototype=n.prototype;try{n.prototype.constructor=t[e]}catch(r){vt=!0,lt(n,yt,{value:t[e]})}}}(e[n]));_.createElement=function(t,e){var n=b(e);return n?Vt.call(this,t,Ot(n)):Vt.call(this,t)},Kt||(Gt=!0,_[R](""))}var _=t.document,E=t.Object,L=function(t){var e,n,r,o,i=/^[A-Z]+[a-z]/,a=function(t){var e,n=[];for(e in u)t.test(e)&&n.push(e);return n},s=function(t,e){(e=e.toLowerCase())in u||(u[t]=(u[t]||[]).concat(e),u[e]=u[e.toUpperCase()]=t)},u=(E.create||E)(null),c={};for(n in t)for(o in t[n])for(r=t[n][o],u[o]=r,e=0;e<r.length;e++)u[r[e].toLowerCase()]=u[r[e].toUpperCase()]=o;return c.get=function(t){return"string"==typeof t?u[t]||(i.test(t)?[]:""):a(t)},c.set=function(t,e){return i.test(t)?s(t,e):s(e,t),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});e||(e="auto");var x,M,O,C,A,S,H,I,R="registerElement",N="__"+R+(1e5*t.Math.random()>>0),P="addEventListener",j="attached",z="Callback",F="detached",D="extends",W="attributeChanged"+z,B=j+z,q="connected"+z,U="disconnected"+z,V="created"+z,Q=F+z,$="ADDITION",Z="REMOVAL",K="DOMAttrModified",Y="DOMContentLoaded",G="DOMSubtreeModified",X="<",J="=",tt=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,et=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],nt=[],rt=[],ot="",it=_.documentElement,at=nt.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},st=E.prototype,ut=st.hasOwnProperty,ct=st.isPrototypeOf,lt=E.defineProperty,pt=[],ft=E.getOwnPropertyDescriptor,dt=E.getOwnPropertyNames,ht=E.getPrototypeOf,mt=E.setPrototypeOf,gt=!!E.__proto__,vt=!1,yt="__dreCEv1",bt=t.customElements,wt="force"!==e&&!!(bt&&bt.define&&bt.get&&bt.whenDefined),Tt=E.create||E,kt=t.Map||function(){var t,e=[],n=[];return{get:function(t){return n[at.call(e,t)]},set:function(r,o){t=at.call(e,r),t<0?n[e.push(r)-1]=o:n[t]=o}}},_t=t.Promise||function(t){function e(t){for(r=!0;n.length;)n.shift()(t)}var n=[],r=!1,o={catch:function(){return o},then:function(t){return n.push(t),r&&setTimeout(e,1),o}};return t(e),o},Et=!1,Lt=Tt(null),xt=Tt(null),Mt=new kt,Ot=function(t){return t.toLowerCase()},Ct=E.create||function t(e){return e?(t.prototype=e,new t):this},At=mt||(gt?function(t,e){return t.__proto__=e,t}:dt&&ft?function(){function t(t,e){for(var n,r=dt(e),o=0,i=r.length;o<i;o++)n=r[o],ut.call(t,n)||lt(t,n,ft(e,n))}return function(e,n){do{t(e,n)}while((n=ht(n))&&!ct.call(n,e));return e}}():function(t,e){for(var n in e)t[n]=e[n];return t}),St=t.MutationObserver||t.WebKitMutationObserver,Ht=(t.HTMLElement||t.Element||t.Node).prototype,It=!ct.call(Ht,it),Rt=It?function(t,e,n){return t[e]=n.value,t}:lt,Nt=It?function(t){return 1===t.nodeType}:function(t){return ct.call(Ht,t)},Pt=It&&[],jt=Ht.attachShadow,zt=Ht.cloneNode,Ft=Ht.dispatchEvent,Dt=Ht.getAttribute,Wt=Ht.hasAttribute,Bt=Ht.removeAttribute,qt=Ht.setAttribute,Ut=_.createElement,Vt=Ut,Qt=St&&{attributes:!0,characterData:!0,attributeOldValue:!0},$t=St||function(t){Xt=!1,it.removeEventListener(K,$t)},Zt=0,Kt=R in _,Yt=!0,Gt=!1,Xt=!0,Jt=!0,te=!0;if(Kt||(mt||gt?(H=function(t,e){ct.call(e,t)||f(t,e)},I=f):(H=function(t,e){t[N]||(t[N]=E(!0),f(t,e))},I=H),It?(Xt=!1,function(){var t=ft(Ht,P),e=t.value,n=function(t){var e=new CustomEvent(K,{bubbles:!0});e.attrName=t,e.prevValue=Dt.call(this,t),e.newValue=null,e[Z]=e.attrChange=2,Bt.call(this,t),Ft.call(this,e)},r=function(t,e){var n=Wt.call(this,t),r=n&&Dt.call(this,t),o=new CustomEvent(K,{bubbles:!0});qt.call(this,t,e),o.attrName=t,o.prevValue=n?r:null,o.newValue=e,n?o.MODIFICATION=o.attrChange=1:o[$]=o.attrChange=0,Ft.call(this,o)},o=function(t){var e,n=t.currentTarget,r=n[N],o=t.propertyName;r.hasOwnProperty(o)&&(r=r[o],e=new CustomEvent(K,{bubbles:!0}),e.attrName=r.name,e.prevValue=r.value||null,e.newValue=r.value=n[o]||null,null==e.prevValue?e[$]=e.attrChange=0:e.MODIFICATION=e.attrChange=1,Ft.call(n,e))};t.value=function(t,i,a){t===K&&this[W]&&this.setAttribute!==r&&(this[N]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,e.call(this,"propertychange",o)),e.call(this,t,i,a)},lt(Ht,P,t)}()):St||(it[P](K,$t),it.setAttribute(N,1),it.removeAttribute(N),Xt&&(M=function(t){var e,n,r,o=this;if(o===t.target){e=o[N],o[N]=n=C(o);for(r in n){if(!(r in e))return O(0,o,r,e[r],n[r],$);if(n[r]!==e[r])return O(1,o,r,e[r],n[r],"MODIFICATION")}for(r in e)if(!(r in n))return O(2,o,r,e[r],n[r],Z)}},O=function(t,e,n,r,o,i){var a={attrChange:t,currentTarget:e,attrName:n,prevValue:r,newValue:o};a[i]=t,u(a)},C=function(t){for(var e,n,r={},o=t.attributes,i=0,a=o.length;i<a;i++)e=o[i],"setAttribute"!==(n=e.name)&&(r[n]=e.value);return r})),_[R]=function(t,e){if(n=t.toUpperCase(),Yt&&(Yt=!1,St?(A=function(t,e){function n(t,e){for(var n=0,r=t.length;n<r;e(t[n++]));}return new St(function(r){for(var o,i,a,s=0,u=r.length;s<u;s++)o=r[s],"childList"===o.type?(n(o.addedNodes,t),n(o.removedNodes,e)):(i=o.target,te&&i[W]&&"style"!==o.attributeName&&(a=Dt.call(i,o.attributeName))!==o.oldValue&&i[W](o.attributeName,o.oldValue,a))})}(i(j),i(F)),S=function(t){return A.observe(t,{childList:!0,subtree:!0}),t},S(_),jt&&(Ht.attachShadow=function(){return S(jt.apply(this,arguments))})):(x=[],_[P]("DOMNodeInserted",c(j)),_[P]("DOMNodeRemoved",c(F))),_[P](Y,l),_[P]("readystatechange",l),Ht.cloneNode=function(t){var e=zt.call(this,!!t),n=a(e);return-1<n&&I(e,rt[n]),t&&ot.length&&o(e.querySelectorAll(ot)),e}),Gt)return Gt=!1;if(-2<at.call(nt,J+n)+at.call(nt,X+n)&&h(t),!tt.test(n)||-1<at.call(et,n))throw new Error("The type "+t+" is invalid");var n,s,u=function(){return f?_.createElement(d,n):_.createElement(d)},p=e||st,f=ut.call(p,D),d=f?e[D].toUpperCase():n;return f&&-1<at.call(nt,X+d)&&h(d),s=nt.push((f?J:X)+n)-1,ot=ot.concat(ot.length?",":"",f?d+'[is="'+t.toLowerCase()+'"]':d),u.prototype=rt[s]=ut.call(p,"prototype")?p.prototype:Ct(Ht),ot.length&&r(_.querySelectorAll(ot),j),u},_.createElement=Vt=function(t,e){var n=b(e),r=n?Ut.call(_,t,Ot(n)):Ut.call(_,t),o=""+t,i=at.call(nt,(n?J:X)+(n||o).toUpperCase()),a=-1<i;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=s(o.toUpperCase(),n))),te=!_.createElement.innerHTMLHelper,a&&I(r,rt[i]),r}),g.prototype={constructor:g,define:wt?function(t,e,n){if(n)v(t,e,n);else{var r=t.toUpperCase();Lt[r]={constructor:e,create:[r]},Mt.set(e,r),bt.define(t,e)}}:v,get:wt?function(t){return bt.get(t)||y(t)}:y,whenDefined:wt?function(t){return _t.race([bt.whenDefined(t),T(t)])}:T},bt&&"force"!==e)try{!function(e,n,r){if(n[D]="a",e.prototype=Ct(HTMLAnchorElement.prototype),e.prototype.constructor=e,t.customElements.define(r,e,n),Dt.call(_.createElement("a",{is:r}),"is")!==r||wt&&Dt.call(new e,"is")!==r)throw n}(function t(){return Reflect.construct(HTMLAnchorElement,[],t)},{},"document-register-element-a")}catch(t){k()}else k();try{Ut.call(_,"a","a")}catch(t){Ot=function(t){return{is:t.toLowerCase()}}}}t.exports=n,n(e)}).call(e,n(4))},function(t,e,n){(function(e,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0
 */
!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function i(t){V=t}function a(t){Q=t}function s(){return void 0!==U?function(){U(c)}:u()}function u(){var t=setTimeout;return function(){return t(c,1)}}function c(){for(var t=0;t<q;t+=2){(0,X[t])(X[t+1]),X[t]=void 0,X[t+1]=void 0}q=0}function l(t,e){var n=arguments,r=this,o=new this.constructor(f);void 0===o[tt]&&S(o);var i=r._state;return i?function(){var t=n[i-1];Q(function(){return O(i,o,t,r._result)})}():E(r,o,t,e),o}function p(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(f);return w(n,t),n}function f(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function m(t){try{return t.then}catch(t){return ot.error=t,ot}}function g(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function v(t,e,n){Q(function(t){var r=!1,o=g(n,e,function(n){r||(r=!0,e!==n?w(t,n):k(t,n))},function(e){r||(r=!0,_(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,_(t,o))},t)}function y(t,e){e._state===nt?k(t,e._result):e._state===rt?_(t,e._result):E(e,void 0,function(e){return w(t,e)},function(e){return _(t,e)})}function b(t,e,n){e.constructor===t.constructor&&n===l&&e.constructor.resolve===p?y(t,e):n===ot?(_(t,ot.error),ot.error=null):void 0===n?k(t,e):o(n)?v(t,e,n):k(t,e)}function w(e,n){e===n?_(e,d()):t(n)?b(e,n,m(n)):k(e,n)}function T(t){t._onerror&&t._onerror(t._result),L(t)}function k(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&Q(L,t))}function _(t,e){t._state===et&&(t._state=rt,t._result=e,Q(T,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+nt]=n,o[i+rt]=r,0===i&&t._state&&Q(L,t)}function L(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?O(n,r,o,i):o(i);t._subscribers.length=0}}function x(){this.error=null}function M(t,e){try{return t(e)}catch(t){return it.error=t,it}}function O(t,e,n,r){var i=o(n),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=M(n,r),a===it?(c=!0,s=a.error,a.error=null):u=!0,e===a)return void _(e,h())}else a=r,u=!0;e._state!==et||(i&&u?w(e,a):c?_(e,s):t===nt?k(e,a):t===rt&&_(e,a))}function C(t,e){try{e(function(e){w(t,e)},function(e){_(t,e)})}catch(e){_(t,e)}}function A(){return at++}function S(t){t[tt]=at++,t._state=void 0,t._result=void 0,t._subscribers=[]}function H(t,e){this._instanceConstructor=t,this.promise=new t(f),this.promise[tt]||S(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):_(this.promise,I())}function I(){return new Error("Array Methods must be provided an Array")}function R(t){return new H(this,t).promise}function N(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function P(t){var e=this,n=new e(f);return _(n,t),n}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(t){this[tt]=A(),this._result=this._state=void 0,this._subscribers=[],f!==t&&("function"!=typeof t&&j(),this instanceof F?C(this,t):z())}function D(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=F}var W=void 0;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=W,q=0,U=void 0,V=void 0,Q=function(t,e){X[q]=t,X[q+1]=e,2===(q+=2)&&(V?V(c):J())},$="undefined"!=typeof window?window:void 0,Z=$||{},K=Z.MutationObserver||Z.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),G="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),J=void 0;J=Y?function(){return function(){return e.nextTick(c)}}():K?function(){var t=0,e=new K(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():G?function(){var t=new MessageChannel;return t.port1.onmessage=c,function(){return t.port2.postMessage(0)}}():void 0===$?function(){try{var t=n(36);return U=t.runOnLoop||t.runOnContext,s()}catch(t){return u()}}():u();var tt=Math.random().toString(36).substring(16),et=void 0,nt=1,rt=2,ot=new x,it=new x,at=0;return H.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===et&&n<t;n++)this._eachEntry(e[n],n)},H.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===p){var o=m(t);if(o===l&&t._state!==et)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===F){var i=new n(f);b(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},H.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?_(r,n):this._result[e]=n),0===this._remaining&&k(r,this._result)},H.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},F.all=R,F.race=N,F.resolve=p,F.reject=P,F._setScheduler=i,F._setAsap=a,F._asap=Q,F.prototype={constructor:F,then:l,catch:function(t){return this.then(null,t)}},F.polyfill=D,F.Promise=F,F})}).call(e,n(35),n(4))},function(t,e){!function(t,e){"use strict";function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||l(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?o/n:0}function r(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=i(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function o(){return t.performance&&performance.now&&performance.now()}function i(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function a(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function s(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function u(t,e){var n=Math.max(t.top,e.top),r=Math.min(t.bottom,e.bottom),o=Math.max(t.left,e.left),i=Math.min(t.right,e.right),a=i-o,s=r-n;return a>=0&&s>=0&&{top:n,bottom:r,left:o,right:i,width:a,height:s}}function c(t){var e=t.getBoundingClientRect();if(e)return e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e}function l(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}if(!("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)){var p=e.documentElement,f=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections()}},r.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},r.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},r.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(t,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(t,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():l();this._observationTargets.forEach(function(r){var i=r.element,a=c(i),s=this._rootContainsTarget(i),u=r.entry,l=t&&s&&this._computeTargetAndRootIntersection(i,e),p=r.entry=new n({time:o(),target:i,boundingClientRect:a,rootBounds:e,intersectionRect:l});t&&s?this._hasCrossedThreshold(u,p)&&this._queuedEntries.push(p):u&&u.isIntersecting&&this._queuedEntries.push(p)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(e,n){if("none"!=t.getComputedStyle(e).display){for(var r=c(e),o=r,i=e.parentNode,a=!1;!a;){var s=null;if(i==this.root||1!=i.nodeType?(a=!0,s=n):"visible"!=t.getComputedStyle(i).overflow&&(s=c(i)),s&&!(o=u(s,o)))break;i=i.parentNode}return o}},r.prototype._getRootRect=function(){var t;if(this.root)t=c(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},r.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||i<n!=i<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||p.contains(this.root)},r.prototype._rootContainsTarget=function(t){return(this.root||p).contains(t)},r.prototype._registerInstance=function(){f.indexOf(this)<0&&f.push(this)},r.prototype._unregisterInstance=function(){var t=f.indexOf(this);-1!=t&&f.splice(t,1)},t.IntersectionObserver=r,t.IntersectionObserverEntry=n}}(window,document)},function(t,e,n){var r=n(33),o=n(30),i=n(31),a=n(32);e.Semaphore=r,e.CondVariable=o,e.Mutex=i,e.ReadWriteLock=a,e.createCondVariable=function(t){return new o(t)},e.createSemaphore=function(t){return new r(t)},e.createMutex=function(){return new i},e.createReadWriteLock=function(){return new a}},function(t,e){function n(t){this._value=t,this._waiting=[]}function r(t){if("function"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t||"string"==typeof t)return function(e){return e===t};if(t&&"object"==typeof t&&t instanceof RegExp)return function(e){return t.test(e)};throw new TypeError("Unknown condition type: "+typeof t)}t.exports=n,n.prototype.get=function(){return this._value},n.prototype.wait=function(t,e){var n=r(t);if(n(this._value))return e.call(this);this._waiting.push({test:n,cb:e})},n.prototype.set=function(t){this._value=t;for(var e=0;e<this._waiting.length;e++){var n=this._waiting[e];n.test(t)&&(this._waiting.splice(e,1),e-=1,n.cb.call(this))}}},function(t,e){function n(){this.isLocked=!1,this._waiting=[]}t.exports=n,n.prototype.lock=function(t){this.isLocked?this._waiting.push(t):(this.isLocked=!0,t.call(this))},n.prototype.timedLock=function(t,e){if(!this.isLocked)return this.isLocked=!0,e.call(this);var n,r=this;this._waiting.push(function(){if(clearTimeout(n),!e)return void r.unlock();e.call(this),e=null}),n=setTimeout(function(){e&&(e.call(this,new Error("Lock timed out")),e=null)},t)},n.prototype.tryLock=function(){return!this.isLocked&&(this.isLocked=!0,!0)},n.prototype.unlock=function(){if(!this.isLocked)throw new Error("Mutex is not locked");var t=this._waiting.shift();t?t.call(this):this.isLocked=!1}},function(t,e){function n(){this.isLocked=!1,this._readLocks=0,this._waitingToRead=[],this._waitingToWrite=[]}t.exports=n,n.prototype.readLock=function(t){"W"===this.isLocked?this._waitingToRead.push(t):(this._readLocks+=1,this.isLocked="R",t.call(this))},n.prototype.writeLock=function(t){this.isLocked?this._waitingToWrite.push(t):(this.isLocked="W",t.call(this))},n.prototype.timedReadLock=function(t,e){function n(){if(clearTimeout(r),e){var t=e;e=null,t.apply(o,arguments)}}if(this.tryReadLock())return e.call(this);var r,o=this;this._waitingToRead.push(n),r=setTimeout(function(){var t=o._waitingToRead.indexOf(n);-1!==t&&(o._waitingToRead.splice(t,1),n(new Error("ReadLock timed out")))},t)},n.prototype.timedWriteLock=function(t,e){function n(){if(clearTimeout(r),e){var t=e;e=null,t.apply(o,arguments)}}if(this.tryWriteLock())return e.call(this);var r,o=this;this._waitingToWrite.push(n),r=setTimeout(function(){var t=o._waitingToWrite.indexOf(n);-1!==t&&(o._waitingToWrite.splice(t,1),n(new Error("WriteLock timed out")))},t)},n.prototype.tryReadLock=function(){return"W"!==this.isLocked&&(this.isLocked="R",this._readLocks+=1,!0)},n.prototype.tryWriteLock=function(){return!this.isLocked&&(this.isLocked="W",!0)},n.prototype.unlock=function(){var t;if("R"===this.isLocked)this._readLocks-=1,0===this._readLocks&&(t=this._waitingToWrite.shift(),t?(this.isLocked="W",t.call(this)):this.isLocked=!1);else{if("W"!==this.isLocked)throw new Error("ReadWriteLock is not locked");var e=this._waitingToRead.length;if(0===e)t=this._waitingToWrite.shift(),t?(this.isLocked="W",t.call(this)):this.isLocked=!1;else{this.isLocked="R",this._readLocks=e;var n=this._waitingToRead.slice();this._waitingToRead=[];for(var r=0;r<e;r++)n[r].call(this)}}}},function(t,e){function n(t){this._count=t||1,this._waiting=[]}t.exports=n,n.prototype.wait=function(t){this._count-=1,this._count<0?this._waiting.push(t):t.call(this)},n.prototype.signal=function(){if(this._count+=1,this._count<=0){var t=this._waiting.shift();t&&t.call(this)}}},function(t,e,n){/**
 * @file postscribe
 * @description Asynchronously write javascript, even with document.write.
 * @version v2.0.8
 * @see {@link https://krux.github.io/postscribe}
 * @license MIT
 * @author Derek Brans
 * @copyright 2016 Krux Digital, Inc
 */
!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(r);t.exports=o.default},function(t,e,n){"use strict";function r(){}function o(){var t=h.shift();if(t){var e=p.last(t);e.afterDequeue(),t.stream=i.apply(void 0,t),e.afterStreamStart()}}function i(t,e,n){function i(t){t=n.beforeWrite(t),m.write(t),n.afterWrite(t)}m=new c.default(t,n),m.id=d++,m.name=n.name||m.id,a.streams[m.name]=m;var u=t.ownerDocument,l={close:u.close,open:u.open,write:u.write,writeln:u.writeln};s(u,{close:r,open:r,write:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(e.join(""))},writeln:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(e.join("")+"\n")}});var p=m.win.onerror||r;return m.win.onerror=function(t,e,r){n.error({msg:t+" - "+e+": "+r}),p.apply(m.win,[t,e,r])},m.write(e,function(){s(u,l),m.win.onerror=p,n.done(),m=null,o()}),m}function a(t,e,n){if(p.isFunction(n))n={done:n};else if("clear"===n)return h=[],m=null,void(d=0);n=p.defaults(n,f),t=/^#/.test(t)?window.document.getElementById(t.substr(1)):t.jquery?t[0]:t;var i=[t,e,n];return t.postscribe={cancel:function(){i.stream?i.stream.abort():i[1]=r}},n.beforeEnqueue(i),h.push(i),m||o(),t.postscribe}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=a;var u=n(2),c=function(t){return t&&t.__esModule?t:{default:t}}(u),l=n(4),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),f={afterAsync:r,afterDequeue:r,afterStreamStart:r,afterWrite:r,autoFix:!0,beforeEnqueue:r,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:r,error:function(t){throw new Error(t.msg)},releaseAsync:!1},d=0,h=[],m=null;s(a,{streams:{},queue:h,WriteStream:c.default})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=p+e,r=t.getAttribute(n);return l.existy(r)?String(r):r}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=p+e;l.existy(n)&&""!==n?t.setAttribute(r,n):t.removeAttribute(r)}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(3),u=function(t){return t&&t.__esModule?t:{default:t}}(s),c=n(4),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(c),p="data-ps-",f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.root=e,this.options=n,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new u.default("",{autoFix:n.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],i(this.proxyRoot,"proxyof",0)}return t.prototype.write=function(){var t;for((t=this.writeQueue).push.apply(t,arguments);!this.deferredRemote&&this.writeQueue.length;){var e=this.writeQueue.shift();l.isFunction(e)?this._callFunction(e):this._writeImpl(e)}},t.prototype._callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this._onScriptStart(e),t.call(this.win,this.doc),this._onScriptDone(e)},t.prototype._writeImpl=function(t){this.parser.append(t);for(var e=void 0,n=void 0,r=void 0,o=[];(e=this.parser.readToken())&&!(n=l.isScript(e))&&!(r=l.isStyle(e));)(e=this.options.beforeWriteToken(e))&&o.push(e);o.length>0&&this._writeStaticTokens(o),n&&this._handleScriptToken(e),r&&this._handleStyleToken(e)},t.prototype._writeStaticTokens=function(t){var e=this._buildChunk(t);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,this._walkChunk(),e):null},t.prototype._buildChunk=function(t){for(var e=this.actuals.length,n=[],r=[],o=[],i=t.length,a=0;a<i;a++){var s=t[a],u=s.toString();if(n.push(u),s.attrs){if(!/^noscript$/i.test(s.tagName)){var c=e++;r.push(u.replace(/(\/?>)/," "+p+"id="+c+" $1")),"ps-script"!==s.attrs.id&&"ps-style"!==s.attrs.id&&o.push("atomicTag"===s.type?"":"<"+s.tagName+" "+p+"proxyof="+c+(s.unary?" />":">"))}}else r.push(u),o.push("endTag"===s.type?u:"")}return{tokens:t,raw:n.join(""),actual:r.join(""),proxy:o.join("")}},t.prototype._walkChunk=function(){for(var t=void 0,e=[this.proxyRoot];l.existy(t=e.shift());){var n=1===t.nodeType;if(!(n&&o(t,"proxyof"))){n&&(this.actuals[o(t,"id")]=t,i(t,"id"));var r=t.parentNode&&o(t.parentNode,"proxyof");r&&this.actuals[r].appendChild(t)}e.unshift.apply(e,l.toArray(t.childNodes))}},t.prototype._handleScriptToken=function(t){var e=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),t.src=t.attrs.src||t.attrs.SRC,(t=this.options.beforeWriteToken(t))&&(t.src&&this.scriptStack.length?this.deferredRemote=t:this._onScriptStart(t),this._writeScriptToken(t,function(){e._onScriptDone(t)}))},t.prototype._handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this._writeStyleToken(t),e&&this.write()},t.prototype._writeStyleToken=function(t){var e=this._buildStyle(t);this._insertCursor(e,"ps-style"),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},t.prototype._buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),l.eachKey(t.attrs,function(t,n){e.setAttribute(t,n)}),e},t.prototype._insertCursor=function(t,e){this._writeImpl('<span id="'+e+'"/>');var n=this.doc.getElementById(e);n&&n.parentNode.replaceChild(t,n)},t.prototype._onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},t.prototype._onScriptDone=function(t){if(t!==this.scriptStack[0])return void this.options.error({msg:"Bad script nesting or script finished twice"});this.scriptStack.shift(),this.write.apply(this,t.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)},t.prototype._writeScriptToken=function(t,e){var n=this._buildScript(t),r=this._shouldRelease(n),o=this.options.afterAsync;t.src&&(n.src=t.src,this._scriptLoadHandler(n,r?o:function(){e(),o()}));try{this._insertCursor(n,"ps-script"),n.src&&!r||e()}catch(t){this.options.error(t),e()}},t.prototype._buildScript=function(t){var e=this.doc.createElement(t.tagName);return l.eachKey(t.attrs,function(t,n){e.setAttribute(t,n)}),t.content&&(e.text=t.content),e},t.prototype._scriptLoadHandler=function(t,e){function n(){t=t.onload=t.onreadystatechange=t.onerror=null}function r(){n(),null!=e&&e(),e=null}function o(t){n(),s(t),null!=e&&e(),e=null}function i(t,e){var n=t["on"+e];null!=n&&(t["_on"+e]=n)}var s=this.options.error;i(t,"load"),i(t,"error"),a(t,{onload:function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){o({msg:"onload handler failed "+e+" @ "+t.src})}r()},onerror:function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void o({msg:"onerror handler failed "+e+" @ "+t.src})}o({msg:"remote script failed "+t.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&r()}})},t.prototype._shouldRelease=function(t){return!/^script$/i.test(t.nodeName)||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},t}();e.default=f},function(t,e,n){/**
	 * @file prescribe
	 * @description Tiny, forgiving HTML parser
	 * @version vundefined
	 * @see {@link https://github.com/krux/prescribe/}
	 * @license MIT
	 * @author Derek Brans
	 * @copyright 2016 Krux Digital, Inc
	 */
!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(r);t.exports=o.default},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(2),a=r(i),s=n(3),u=r(s),c=n(6),l=function(t){return t&&t.__esModule?t:{default:t}}(c),p=n(5),f={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.stream=n;var i=!1,s={};for(var u in a)a.hasOwnProperty(u)&&(r.autoFix&&(s[u+"Fix"]=!0),i=i||s[u+"Fix"]);i?(this._readToken=(0,l.default)(this,s,function(){return e._readTokenImpl()}),this._peekToken=(0,l.default)(this,s,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return t.prototype.append=function(t){this.stream+=t},t.prototype.prepend=function(t){this.stream=t+this.stream},t.prototype._readTokenImpl=function(){var t=this._peekTokenImpl();if(t)return this.stream=this.stream.slice(t.length),t},t.prototype._peekTokenImpl=function(){for(var t in f)if(f.hasOwnProperty(t)&&f[t].test(this.stream)){var e=u[t](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},t.prototype.peekToken=function(){return this._peekToken()},t.prototype.readToken=function(){return this._readToken()},t.prototype.readTokens=function(t){for(var e=void 0;e=this.readToken();)if(t[e.type]&&!1===t[e.type](e))return},t.prototype.clear=function(){var t=this.stream;return this.stream="",t},t.prototype.rest=function(){return this.stream},t}();e.default=d,d.tokenToString=function(t){return t.toString()},d.escapeAttributes=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=(0,p.escapeQuotes)(t[n],null));return e},d.supports=a;for(var h in a)a.hasOwnProperty(h)&&(d.browserHasFlaw=d.browserHasFlaw||!a[h]&&h)},function(t,e){"use strict";e.__esModule=!0;var n=!1,r=!1,o=window.document.createElement("div");try{var i="<P><I></P></I>";o.innerHTML=i,e.tagSoup=n=o.innerHTML!==i}catch(t){e.tagSoup=n=!1}try{o.innerHTML="<P><i><P></P></i></P>",e.selfClose=r=2===o.childNodes.length}catch(t){e.selfClose=r=!1}o=null,e.tagSoup=n,e.selfClose=r},function(t,e,n){"use strict";function r(t){var e=t.indexOf("--\x3e");if(e>=0)return new c.CommentToken(t.substr(4,e-1),e+3)}function o(t){var e=t.indexOf("<");return new c.CharsToken(e>=0?e:t.length)}function i(t){if(-1!==t.indexOf(">")){var e=t.match(l.startTag);if(e){var n=function(){var t={},n={},r=e[2];return e[2].replace(l.attr,function(e,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",n[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||l.fillAttr.test(o)&&o||"":t[o]="",r=r.replace(e,"")}),{v:new c.StartTagToken(e[1],e[0].length,t,n,!!e[3],r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}();if("object"===(void 0===n?"undefined":u(n)))return n.v}}}function a(t){var e=i(t);if(e){var n=t.slice(e.length);if(n.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var r=n.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(r)return new c.AtomicTagToken(e.tagName,r[0].length+e.length,e.attrs,e.booleanAttrs,r[1])}}}function s(t){var e=t.match(l.endTag);if(e)return new c.EndTagToken(e[1],e[0].length)}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.comment=r,e.chars=o,e.startTag=i,e.atomicTag=a,e.endTag=s;var c=n(4),l={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.EndTagToken=e.AtomicTagToken=e.StartTagToken=e.TagToken=e.CharsToken=e.CommentToken=e.Token=void 0;var o=n(5),i=(e.Token=function t(e,n){r(this,t),this.type=e,this.length=n,this.text=""},e.CommentToken=function(){function t(e,n){r(this,t),this.type="comment",this.length=n||(e?e.length:0),this.text="",this.content=e}return t.prototype.toString=function(){return"\x3c!--"+this.content},t}(),e.CharsToken=function(){function t(e){r(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),e.TagToken=function(){function t(e,n,o,i,a){r(this,t),this.type=e,this.length=o,this.text="",this.tagName=n,this.attrs=i,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1}return t.formatTag=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="<"+t.tagName;for(var r in t.attrs)if(t.attrs.hasOwnProperty(r)){n+=" "+r;var i=t.attrs[r];void 0!==t.booleanAttrs&&void 0!==t.booleanAttrs[r]||(n+='="'+(0,o.escapeQuotes)(i)+'"')}return t.rest&&(n+=" "+t.rest),t.unary&&!t.html5Unary?n+="/>":n+=">",void 0!==e&&null!==e&&(n+=e+"</"+t.tagName+">"),n},t}());e.StartTagToken=function(){function t(e,n,o,i,a,s){r(this,t),this.type="startTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.html5Unary=!1,this.unary=a,this.rest=s}return t.prototype.toString=function(){return i.formatTag(this)},t}(),e.AtomicTagToken=function(){function t(e,n,o,i,a){r(this,t),this.type="atomicTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1,this.content=a}return t.prototype.toString=function(){return i.formatTag(this,this.content)},t}(),e.EndTagToken=function(){function t(e,n){r(this,t),this.type="endTag",this.length=n,this.text="",this.tagName=e}return t.prototype.toString=function(){return"</"+this.tagName+">"},t}()},function(t,e){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?t.replace(/([^"]*)"/g,function(t,e){return/\\/.test(e)?e+'"':e+'\\"'}):e}e.__esModule=!0,e.escapeQuotes=n},function(t,e){"use strict";function n(t){return t&&"startTag"===t.type&&(t.unary=s.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t}function r(t,e){var r=t.stream,o=n(e());return t.stream=r,o}function o(t,e){var n=e.pop();t.prepend("</"+n.tagName+">")}function i(){var t=[];return t.last=function(){return this[this.length-1]},t.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},t.containsTagName=function(t){for(var e,n=0;e=this[n];n++)if(e.tagName===t)return!0;return!1},t}function a(t,e,a){function s(){var e=r(t,a);e&&l[e.type]&&l[e.type](e)}var c=i(),l={startTag:function(n){var r=n.tagName;"TR"===r.toUpperCase()&&c.lastTagNameEq("TABLE")?(t.prepend("<TBODY>"),s()):e.selfCloseFix&&u.test(r)&&c.containsTagName(r)?c.lastTagNameEq(r)?o(t,c):(t.prepend("</"+n.tagName+">"),s()):n.unary||c.push(n)},endTag:function(n){c.last()?e.tagSoupFix&&!c.lastTagNameEq(n.tagName)?o(t,c):c.pop():e.tagSoupFix&&(a(),s())}};return function(){return s(),n(a())}}e.__esModule=!0,e.default=a;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,u=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])})},function(t,e){"use strict";function n(t){return void 0!==t&&null!==t}function r(t){return"function"==typeof t}function o(t,e,n){var r=void 0,o=t&&t.length||0;for(r=0;r<o;r++)e.call(n,t[r],r)}function i(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,r,t[r])}function a(t,e){return t=t||{},i(e,function(e,r){n(t[e])||(t[e]=r)}),t}function s(t){try{return Array.prototype.slice.call(t)}catch(n){var e=function(){var e=[];return o(t,function(t){e.push(t)}),{v:e}}();if("object"===(void 0===e?"undefined":f(e)))return e.v}}function u(t){return t[t.length-1]}function c(t,e){return!(!t||"startTag"!==t.type&&"atomicTag"!==t.type||!("tagName"in t))&&!!~t.tagName.toLowerCase().indexOf(e)}function l(t){return c(t,"script")}function p(t){return c(t,"style")}e.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.existy=n,e.isFunction=r,e.each=o,e.eachKey=i,e.defaults=a,e.toArray=s,e.last=u,e.isTag=c,e.isScript=l,e.isStyle=p}])})},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?h=d.concat(h):g=-1,h.length&&s())}function s(){if(!m){var t=o(a);m=!0;for(var e=h.length;e;){for(d=h,h=[];++g<e;)d&&d[g].run();g=-1,e=h.length}d=null,m=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,p,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var d,h=[],m=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e){}]);
